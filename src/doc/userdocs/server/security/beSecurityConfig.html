<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<head>
    <title>Backend Services Security Configuration</title>
    <link rel="stylesheet" type="text/css" href="../../docstyle.css" />
</head>

<body>
<div id="header">
    <a href="" id="logo"></a>
    <div id="title">
        <h1>Backend Services Security Configuration</h1>
        <h2>Fedora Release 2.2.2</h2>
    </div>
</div>

<!-- 
<div class="toc">
    <h2>Table of Contents</h2>
    <div class="tocbox">
        <ol>
            <li><a href="#INTRO">Introduction</a></li>
            <li><a href="#BASICS">Backend Security Basics</a></li>
			<li><a href="#POLICY">Policies Autogenerated by beSecurity Information</a></li>
			<li><a href="#EXAMPLES">beSecurity File Examples</a>
			    <ul>
					<li><a href="#EXAMPLES-SECURE-APIM">4.1 SSL-AUTHENTICATE-APIM Example</a></li>
					<li><a href="#EXAMPLES-SECURE-ALL">4.2 SSL-AUTHENTICATE-ALL Example</a></li>
					<li><a href="#EXAMPLES-UNSECURE-APIM">4.3 
					NO-SSL-AUTHENTICATE-APIM Example</a></li>
					<li><a href="#EXAMPLES-UNSECURE-ALL">4.4 NO-SSL-AUTHENTICATE-ALL Example</a></li>					
			    </ul>
			</li>
			<li><a href="#CONFIGTOOL">beSecurity Configuration Tool</a>
				<ul>
					<li><a href="#CONFIGTOOL-INTERNAL">5.1 Internal Settings</a></li>
					<li><a href="#CONFIGTOOL-CALL">5.2 Specifying How The Fedora Server Communicates With The Backend Service</a></li>
					<li><a href="#CONFIGTOOL-CALLBACK">5.3 Specifying How The Backend Service Communicates With The Fedora Server</a></li>
					<li><a href="#CONFIGTOOL-OVERRIDE">5.4 Specifying Method Overrides</a></li>
					<li><a href="#CONFIGTOOL-SAVE">5.5 Saving Your Changes</a></li>
				</ul></li>
	    </ol>
    </div>
</div>
-->

<div class="sect">
<br/>
<br/>
	<h2><a name="INTRO"></a>Backend Security Feature Disabled In Fedora 2.2</h2>

  <p>Disseminators represent a pair of specialized digital objects known as Behavior 
    Definition(bdef) objects and Behavior Mechanism(bmech) objects. The bdef object 
    represents a high-level abstract description of the set of services provided 
    by the disseminator. The bmech object provides the executable code in the 
    form of an external web service that actually performs the set of services. 
    The term "backend services" is used to describe the set of web services defined 
    by all bmech objects in a given repository.</p>
    
    <p>Backend Security is only in scope when using custom user-defined disseminators
    and when Datastream Mediation is enabled. When Datastream Mediation is enabled,
    the Fedora server does not expose datastream location URLs to the backend services.
    Instead, it generates a one-time callback URL containing a token that can be used by the
    backend service to obtain the contents of the desired datastream. The callback URLs are
    directed at one of two targets: 1) /fedora/getDS when the backend service is incapable
    of handling basic authentication and/or SSL , and 2) /fedora/getDSAuthenticated when
    the backend service can handle basic authentication and/or SSL support. The beSecurity.xml
    file contains information that is used to determine which target should be used for
    each backend service and also is used to generate backend security policies that
    are enforced at the time the callback is made by the backend service. These generated
    policies enforce IP restrictions and whether the connection should be over SSL or not.
    </p>
    
    <p>The Backend Security feature was introduced in Fedora 2.1 as a means of enhancing 
    security between the Fedora server and backend services. However, recent code refactoring 
    related to authentication in Fedora 2.2 revealed some issues with the initial backend security
    design. These issues could not be adequately addressed in time for the Fedora 2.2 release so the 
    Backend Security feature is disabled in Fedora 2.2 pending a future redesign
    to address these issues.</p>
    
    <p>The Backend Security feature is disabled in the code by bypassing the section of code
    in DatastreamResolverServlet that enforces policies that are auto-generated from the beSecurity.xml file. 
    Information in the beSecurty.xml file related to authentication and SSL support is still used
    by the code to determine the correct URL callback target (getDS or getDSAuthenticated)
    to use.</p>
    
    <p>The intended purpose of Datastream Mediation and Backend Security was to prevent a
    hostile agent from being able to read datastream content that might otherwise be protected
    by the front-door API-A policies. In other words, to enhance security for the getDS
    and getDSAuthenticated operations which are callback targets that backend services use
    to get datastream content. In disabling the Backend Security policies, the risk of exposure
    has increased slightly but is mitigated by the fact that the backend callback URLs are
    generated by the Fedora repository server and they are one-time URLs containing tokens
    that do not reveal the datastream identity. So, a hostile agent would not be able to just 
    launch URLs at the backend endpoints to try to obtain specific datastreams. 
    The one kind of attack that could happen is a monkey-in-the middle attack where a hostile 
    agent would intercept the call the Fedora server makes to a backend service (then pluck the 
    callback URL out of the call to the service and play it back to the repository).
    However, backend callback connections are also still governed by a time limit 
    (see datastreamMediationLimit configuration parameter in fedora.fcfg)
    which would limit the window available for such attempts.
    </p>
    
    <p>Administrators wishing to further limit exposure can choose to handle backend security in 
    other ways. For example, close down the getDSAuthenticated target by IP address and keep all 
    backend services on the same machine as the Fedora repository.
    </p>
</div>
<div id="footer">
    <div id="copyright">
        Copyright &#xA9; 2002-2008 Fedora Project
    </div>
    <div id="lastModified">
        Last Modified
        <script type="text/javascript">
            var cvsDate = "$Date$";
            var parts = cvsDate.split(" ");
            var modifiedDate = parts[1];
            document.write(modifiedDate);
        </script>
    </div>
</div>
</div></body>
</html>