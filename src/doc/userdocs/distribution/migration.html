<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
                      
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
  <head>
    <title>Fedora Upgrade and Migration Guide</title>
    <link rel="stylesheet" type="text/css" href="../docstyle.css" />
  </head>

  <body>

    <div id="header">
      <a href="../../../index.html">
      </a>
      <h1>Fedora Upgrade and Migration Guide</h1>
      <h2>Fedora Release 2.2.1</h2>
    </div>

    <div id="toc">
      <h2>Table of Contents</h2>
      <ol>
        <li><a href="#migrate22">Upgrading from Fedora 2.2 to Fedora 2.2.1</a></li>
      	<li><a href="#migrate211">Upgrading from Fedora 2.1.1 to Fedora 2.2.1</a></li>
      	<li><a href="#migrate21">Upgrading from Fedora 2.1 to Fedora 2.2.1</a></li>
      	<li><a href="#migrate20">Upgrading from Fedora 2.0 to Fedora 2.2.1</a></li>
      	<li><a href="#migratepre20">Upgrading from versions prior to 2.0</a></li>
      </ol>
    </div>
    
    <ol id="content">
    
      <li>
        <h2 id="migrate22">Upgrading from Fedora 2.2 to Fedora 2.2.1</h2>
        <span class="plaintext">
          This is a minor upgrade that fixes the <a href="release-notes.html">bugs addressed by the Fedora 2.2.1 release</a>.  We have developed a utility to make this process as quick as possible.
          <br />
          <br />
          <ol class="alpha">
            <li><a href="http://sourceforge.net/project/showfiles.php?group_id=177054&package_id=219723">Download fedora-2.2.1-upgrade.jar</a> from Sourceforge.</li>
            <li>Stop the webapp container in which Fedora is running.</li>
            <li>Run the upgrade utility: java -jar fedora-2.2.1-upgrade.jar and follow the prompts.</li>
            <li>Restart the webapp container.</li>
          </ol>
          <br />
          NOTE: Although the <em>Fedora Administrator</em> Java application will be upgraded as part of this process, existing tools and services that use fedora-client.jar version 2.2 <em>do not need the updated version of this library</em> in order to continue working properly with your upgraded server.
        </span>
      </li>
      
      <li>
        <h2 id="migrate211">Upgrading from Fedora 2.1.1 to Fedora 2.2.1</h2>
        <span class="plaintext">
          Upgrading from Fedora 2.1.1 to Fedora 2.2.1 does not require migration of objects or rebuilding of the Resource Index. However, there are important changes to the packaging and configuration between 2.1.1 and 2.2.1. Notably, neither the Fedora Configuration File (fedora.fcfg) nor Fedora Web Deployment Descriptor (web.xml) of previous versions is compatible with Fedora 2.2.1.
          <br />
          <br />
          <ol class="alpha">
            <li>Backup<br />It is highly recommended you backup your existing Fedora repository.</li>
            <br />
            <li>Use your database's administrative tool or SQL command line utility to rename the "do" table to "dobj".  This is normally done via the SQL command:
            <code class="block">
<pre>
ALTER TABLE do RENAME TO dobj
</pre>
            </code>
            </li>
            <br />
            <li>Install Fedora 2.2.1<br />Review the <a href="installation.html">Installation and Configuration Guide</a>. Note the following critical steps of the installation process:
              <ul>
                <li>When prompted for the installation type, select "custom".</li>
                <li>When prompted for the Fedora home directory, <strong>DO NOT</strong> select the Fedora home directory of your previous installation: select a new directory.</li>
                <li>When prompted for the Servlet engine, if you select an existing Tomcat installation, <strong>DO NOT</strong> select the servlet container of your previous Fedora installation. If you select an existing servlet container, please make sure it is not running (or, ensure that it is not configured to automatically deploy web applications).</li>
                <li>When prompted for the Database, select the database (i.e., mysql, oracle, etc.) you used with your previous installation of Fedora. Use the same database username, password, JDBC url, and Driver Class used in the previous Fedora installation (refer to your old fedora.fcfg if needed).</li>
              </ul>
            </li>
            <br />
            <li>Post install, edit your new Fedora Configuration File ($FEDORA_HOME/server/config/fedora.fcfg). Copy the following parameter values from your old fedora.fcfg to your new fedora.fcfg:
              <ul>
                <li>module.fedora.server.storage.lowlevel.ILowlevelStorage.object_store_base</li>
				<li>module.fedora.server.storage.lowlevel.ILowlevelStorage.datastream_store_base</li>
				<li>module.fedora.server.resourceIndex.ResourceIndex.level</li>
				<li>datastore.localKowariTriplestore.path</li>
			  </ul>
			  <br />
			  If you made any customizations to your previous fedora.fcfg, you may apply them now.
			</li>
          </ol>
        </span>
      </li>
      <li>
        <h2 id="migrate21">Upgrading from Fedora 2.1 to Fedora 2.2.1</h2>
        <span class="plaintext">
          Follow the steps in section 1 for upgrading from 2.1.1.
        </span>
      </li>
      <li>
        <h2 id="migrate20">Upgrading From Fedora 2.0 to Fedora 2.2.1</h2>
        <span class="plaintext">
          When moving from Fedora 2.0 to Fedora 2.2.1, you will be able to do a simple software <em><strong>upgrade</strong></em> without having to migrate digital objects via a mass export and ingest. After installing Fedora 2.2.1, you can configure it to point to your existing repository datastores (both the existing repository directory storage locations and the existing relational database). This involves changing parameters in the Fedora 2.2.1 server configuration file (fedora.fcfg) that define the storage directory paths and database location. See the instructions in section 1 above for details.
          <br />
          <br />
          Note that the Resource Index model changed between 2.0 and 2.1, hence a rebuild of the Resource Index is necessary if upgrading from 2.0 to 2.2.1. See the instructions for <a href="../server/cmd-line/index.html#rebuild">rebuilding the Resource Index</a>.
        </span>
      </li>
      <li>
        <h2 id="migratepre20">Upgrading from versions prior to 2.0</h2>
        <span class="plaintext">
          To upgrade from a Fedora version prior to 2.0, you must first <a href="http://fedora.info/download/2.0/userdocs/distribution/migration.html">migrate to version 2.0</a>, then follow the appropriate upgrade steps above.
        </span>
      </li>
    </ol>
    <div id="footer">
      <p id="copyright">
        Copyright &copy; 2002-2007 Fedora Project
      </p>
      <script type="text/javascript">
        var cvsDate = "$Date: 2007-08-01 15:42:14 -0400 (Wed, 01 Aug 2007) $";
        var parts = cvsDate.split(" ");
        var modifiedDate = parts[1];
        var p = document.createElement("p");
        p.setAttribute("id", "lastModified");
        var footer = document.getElementById("footer");
        footer.appendChild(p);
        p.innerHTML = "Last Modified "+modifiedDate;
      </script>
    </div>
    
  </body>
</html>